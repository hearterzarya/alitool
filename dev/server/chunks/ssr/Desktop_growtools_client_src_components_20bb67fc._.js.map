{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumarbhullan/Desktop/growtools/client/src/components/ui/dialog.tsx"],"sourcesContent":["'use client';\n\nimport * as React from \"react\";\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\";\nimport { X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Dialog = DialogPrimitive.Root;\n\nconst DialogTrigger = DialogPrimitive.Trigger;\n\nconst DialogPortal = DialogPrimitive.Portal;\n\nconst DialogClose = DialogPrimitive.Close;\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName;\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n));\nDialogContent.displayName = DialogPrimitive.Content.displayName;\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogHeader.displayName = \"DialogHeader\";\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n);\nDialogFooter.displayName = \"DialogFooter\";\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n));\nDialogTitle.displayName = DialogPrimitive.Title.displayName;\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nDialogDescription.displayName = DialogPrimitive.Description.displayName;\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,SAAS,4MAAoB;AAEnC,MAAM,gBAAgB,+MAAuB;AAE7C,MAAM,eAAe,8MAAsB;AAE3C,MAAM,cAAc,6MAAqB;AAEzC,MAAM,8BAAgB,qPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gRAAC,+MAAuB;QACtB,KAAK;QACL,WAAW,IAAA,2JAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGb,cAAc,WAAW,GAAG,+MAAuB,CAAC,WAAW;AAE/D,MAAM,8BAAgB,qPAAgB,CAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpC,gRAAC;;0BACC,gRAAC;;;;;0BACD,gRAAC,+MAAuB;gBACtB,KAAK;gBACL,WAAW,IAAA,2JAAE,EACX,+fACA;gBAED,GAAG,KAAK;;oBAER;kCACD,gRAAC,6MAAqB;wBAAC,WAAU;;0CAC/B,gRAAC,mOAAC;gCAAC,WAAU;;;;;;0CACb,gRAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,cAAc,WAAW,GAAG,+MAAuB,CAAC,WAAW;AAE/D,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,gRAAC;QACC,WAAW,IAAA,2JAAE,EACX,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,eAAe,CAAC,EACpB,SAAS,EACT,GAAG,OACkC,iBACrC,gRAAC;QACC,WAAW,IAAA,2JAAE,EACX,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,aAAa,WAAW,GAAG;AAE3B,MAAM,4BAAc,qPAAgB,CAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gRAAC,6MAAqB;QACpB,KAAK;QACL,WAAW,IAAA,2JAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,6MAAqB,CAAC,WAAW;AAE3D,MAAM,kCAAoB,qPAAgB,CAGxC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,gRAAC,mNAA2B;QAC1B,KAAK;QACL,WAAW,IAAA,2JAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,kBAAkB,WAAW,GAAG,mNAA2B,CAAC,WAAW"}},
    {"offset": {"line": 144, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumarbhullan/Desktop/growtools/client/src/components/dashboard/access-tool-button.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { ExternalLink, Chrome } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\n\ninterface AccessToolButtonProps {\n  tool: {\n    id: string;\n    name: string;\n    toolUrl: string;\n    cookiesEncrypted?: string | null;\n  };\n}\n\nexport function AccessToolButton({ tool }: AccessToolButtonProps) {\n  const [showExtensionModal, setShowExtensionModal] = useState(false);\n  const [loading, setLoading] = useState(false);\n\n  const handleAccessTool = async () => {\n    setLoading(true);\n\n    try {\n      // Check if extension is installed\n      const hasExtension = await checkExtension();\n\n      if (!hasExtension) {\n        setShowExtensionModal(true);\n        setLoading(false);\n        return;\n      }\n\n      // Fetch cookies from API\n      const response = await fetch(`/api/cookies/${tool.id}`);\n\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch cookies\");\n      }\n\n      const { cookies, url } = await response.json();\n\n      // Send message to extension\n      window.postMessage(\n        {\n          type: \"GROWTOOLS_ACCESS\",\n          toolId: tool.id,\n          url: url,\n          cookies: cookies,\n        },\n        \"*\"\n      );\n    } catch (error) {\n      console.error(\"Error accessing tool:\", error);\n      alert(\"Failed to access tool. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const checkExtension = (): Promise<boolean> => {\n    return new Promise((resolve) => {\n      // For now, we'll just check if the message can be posted\n      // In production, the extension would respond with a confirmation\n      const extensionId = process.env.NEXT_PUBLIC_EXTENSION_ID;\n\n      if (!extensionId) {\n        // Extension not configured, show modal\n        resolve(false);\n        return;\n      }\n\n      // Try to communicate with extension\n      try {\n        window.postMessage({ type: \"GROWTOOLS_CHECK\" }, \"*\");\n\n        // Wait for response (timeout after 1 second)\n        const timeout = setTimeout(() => resolve(false), 1000);\n\n        const handler = (event: MessageEvent) => {\n          if (event.data.type === \"GROWTOOLS_INSTALLED\") {\n            clearTimeout(timeout);\n            window.removeEventListener(\"message\", handler);\n            resolve(true);\n          }\n        };\n\n        window.addEventListener(\"message\", handler);\n      } catch {\n        resolve(false);\n      }\n    });\n  };\n\n  return (\n    <>\n      <Button\n        className=\"w-full\"\n        onClick={handleAccessTool}\n        disabled={loading || !tool.cookiesEncrypted}\n      >\n        {loading ? (\n          \"Loading...\"\n        ) : !tool.cookiesEncrypted ? (\n          \"Cookies not configured\"\n        ) : (\n          <>\n            <ExternalLink className=\"h-4 w-4 mr-2\" />\n            Access Tool\n          </>\n        )}\n      </Button>\n\n      {/* Extension Required Modal */}\n      <Dialog open={showExtensionModal} onOpenChange={setShowExtensionModal}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Chrome className=\"h-6 w-6 text-primary\" />\n              Extension Required\n            </DialogTitle>\n            <DialogDescription className=\"space-y-4 pt-4\">\n              <p>\n                To access your tools, you need to install the GrowTools Browser Extension.\n              </p>\n\n              <div className=\"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg\">\n                <h4 className=\"font-semibold mb-2\">How it works:</h4>\n                <ol className=\"list-decimal list-inside space-y-1 text-sm\">\n                  <li>Install the browser extension</li>\n                  <li>Click \"Access Tool\" button</li>\n                  <li>Tool opens automatically with your account logged in</li>\n                </ol>\n              </div>\n\n              <div className=\"flex gap-3\">\n                <Button asChild className=\"flex-1\">\n                  <a\n                    href=\"https://chrome.google.com/webstore\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    <Chrome className=\"h-4 w-4 mr-2\" />\n                    Install Extension\n                  </a>\n                </Button>\n                <Button variant=\"outline\" onClick={() => setShowExtensionModal(false)}>\n                  Maybe Later\n                </Button>\n              </div>\n            </DialogDescription>\n          </DialogHeader>\n        </DialogContent>\n      </Dialog>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAsBO,SAAS,iBAAiB,EAAE,IAAI,EAAyB;IAC9D,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,mPAAQ,EAAC;IAC7D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,mPAAQ,EAAC;IAEvC,MAAM,mBAAmB;QACvB,WAAW;QAEX,IAAI;YACF,kCAAkC;YAClC,MAAM,eAAe,MAAM;YAE3B,IAAI,CAAC,cAAc;gBACjB,sBAAsB;gBACtB,WAAW;gBACX;YACF;YAEA,yBAAyB;YACzB,MAAM,WAAW,MAAM,MAAM,CAAC,aAAa,EAAE,KAAK,EAAE,EAAE;YAEtD,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,EAAE,OAAO,EAAE,GAAG,EAAE,GAAG,MAAM,SAAS,IAAI;YAE5C,4BAA4B;YAC5B,OAAO,WAAW,CAChB;gBACE,MAAM;gBACN,QAAQ,KAAK,EAAE;gBACf,KAAK;gBACL,SAAS;YACX,GACA;QAEJ,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACR,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,iBAAiB;QACrB,OAAO,IAAI,QAAQ,CAAC;YAClB,yDAAyD;YACzD,iEAAiE;YACjE,MAAM,cAAc,QAAQ,GAAG,CAAC,wBAAwB;YAExD,IAAI,CAAC,aAAa;gBAChB,uCAAuC;gBACvC,QAAQ;gBACR;YACF;YAEA,oCAAoC;YACpC,IAAI;gBACF,OAAO,WAAW,CAAC;oBAAE,MAAM;gBAAkB,GAAG;gBAEhD,6CAA6C;gBAC7C,MAAM,UAAU,WAAW,IAAM,QAAQ,QAAQ;gBAEjD,MAAM,UAAU,CAAC;oBACf,IAAI,MAAM,IAAI,CAAC,IAAI,KAAK,uBAAuB;wBAC7C,aAAa;wBACb,OAAO,mBAAmB,CAAC,WAAW;wBACtC,QAAQ;oBACV;gBACF;gBAEA,OAAO,gBAAgB,CAAC,WAAW;YACrC,EAAE,OAAM;gBACN,QAAQ;YACV;QACF;IACF;IAEA,qBACE;;0BACE,gRAAC,8KAAM;gBACL,WAAU;gBACV,SAAS;gBACT,UAAU,WAAW,CAAC,KAAK,gBAAgB;0BAE1C,UACC,eACE,CAAC,KAAK,gBAAgB,GACxB,yCAEA;;sCACE,gRAAC,wQAAY;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;0BAO/C,gRAAC,8KAAM;gBAAC,MAAM;gBAAoB,cAAc;0BAC9C,cAAA,gRAAC,qLAAa;8BACZ,cAAA,gRAAC,oLAAY;;0CACX,gRAAC,mLAAW;gCAAC,WAAU;;kDACrB,gRAAC,oPAAM;wCAAC,WAAU;;;;;;oCAAyB;;;;;;;0CAG7C,gRAAC,yLAAiB;gCAAC,WAAU;;kDAC3B,gRAAC;kDAAE;;;;;;kDAIH,gRAAC;wCAAI,WAAU;;0DACb,gRAAC;gDAAG,WAAU;0DAAqB;;;;;;0DACnC,gRAAC;gDAAG,WAAU;;kEACZ,gRAAC;kEAAG;;;;;;kEACJ,gRAAC;kEAAG;;;;;;kEACJ,gRAAC;kEAAG;;;;;;;;;;;;;;;;;;kDAIR,gRAAC;wCAAI,WAAU;;0DACb,gRAAC,8KAAM;gDAAC,OAAO;gDAAC,WAAU;0DACxB,cAAA,gRAAC;oDACC,MAAK;oDACL,QAAO;oDACP,KAAI;;sEAEJ,gRAAC,oPAAM;4DAAC,WAAU;;;;;;wDAAiB;;;;;;;;;;;;0DAIvC,gRAAC,8KAAM;gDAAC,SAAQ;gDAAU,SAAS,IAAM,sBAAsB;0DAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUvF"}}]
}