{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumarbhullan/Desktop/growtools/client/src/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient({\n  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],\n  datasources: {\n    db: {\n      url: process.env.DATABASE_URL,\n    },\n  },\n});\n\n// Handle connection errors gracefully\nif (process.env.NODE_ENV !== 'production') {\n  globalForPrisma.prisma = prisma;\n  \n  // Test connection on startup in development\n  if (typeof window === 'undefined') {\n    prisma.$connect().catch((error) => {\n      console.error('âŒ Database connection failed:', error.message);\n      console.error('ðŸ’¡ Make sure DATABASE_URL is set in your .env.local file');\n      console.error('ðŸ’¡ Run: npm run db:push to create database tables');\n    });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,wOAAY,CAAC;IAC/D,KAAK,uCAAyC;QAAC;QAAS;QAAS;KAAO,GAAG;IAC3E,aAAa;QACX,IAAI;YACF,KAAK,QAAQ,GAAG,CAAC,YAAY;QAC/B;IACF;AACF;AAEA,sCAAsC;AACtC,wCAA2C;IACzC,gBAAgB,MAAM,GAAG;IAEzB,4CAA4C;IAC5C,wCAAmC;QACjC,OAAO,QAAQ,GAAG,KAAK,CAAC,CAAC;YACvB,QAAQ,KAAK,CAAC,iCAAiC,MAAM,OAAO;YAC5D,QAAQ,KAAK,CAAC;YACd,QAAQ,KAAK,CAAC;QAChB;IACF;AACF"}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///Users/mohitkumarbhullan/Desktop/growtools/client/src/app/api/auth/register/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { prisma } from \"@/lib/prisma\";\nimport bcrypt from \"bcryptjs\";\n\nexport async function POST(req: Request) {\n  try {\n    const { email, password, name } = await req.json();\n\n    if (!email || !password) {\n      return NextResponse.json(\n        { error: \"Email and password are required\" },\n        { status: 400 }\n      );\n    }\n\n    // Check database connection first\n    try {\n      await prisma.$connect();\n    } catch (dbError: any) {\n      console.error(\"Database connection error:\", dbError);\n      return NextResponse.json(\n        { \n          error: \"Database connection failed. Please check your DATABASE_URL environment variable and ensure the database is running.\",\n          details: process.env.NODE_ENV === 'development' ? dbError.message : undefined\n        },\n        { status: 503 }\n      );\n    }\n\n    // Check if user already exists\n    let existingUser;\n    try {\n      existingUser = await prisma.user.findUnique({\n        where: { email },\n      });\n    } catch (prismaError: any) {\n      console.error(\"Prisma query error:\", prismaError);\n      \n      // Handle specific Prisma errors\n      if (prismaError.code === 'P2024') {\n        return NextResponse.json(\n          { \n            error: \"Database connection timed out. Please check your database connection and try again.\",\n            details: process.env.NODE_ENV === 'development' ? \"P2024: Connection timeout\" : undefined\n          },\n          { status: 503 }\n        );\n      }\n      \n      if (prismaError.code === 'P2021') {\n        return NextResponse.json(\n          { \n            error: \"Database tables not found. Please run 'npm run db:push' to create the database schema.\",\n            details: process.env.NODE_ENV === 'development' ? \"P2021: Table does not exist\" : undefined\n          },\n          { status: 503 }\n        );\n      }\n      \n      throw prismaError;\n    }\n\n    if (existingUser) {\n      return NextResponse.json(\n        { error: \"User already exists\" },\n        { status: 400 }\n      );\n    }\n\n    // Hash password\n    const hashedPassword = await bcrypt.hash(password, 10);\n\n    // Create user\n    const user = await prisma.user.create({\n      data: {\n        email,\n        name: name || null,\n        passwordHash: hashedPassword,\n      },\n    });\n\n    return NextResponse.json(\n      {\n        user: {\n          id: user.id,\n          email: user.email,\n          name: user.name,\n        },\n      },\n      { status: 201 }\n    );\n  } catch (error: any) {\n    console.error(\"Registration error:\", error);\n    \n    // Handle Prisma errors\n    if (error.code === 'P2024') {\n      return NextResponse.json(\n        { \n          error: \"Database connection timed out. Please check your database connection.\",\n          details: process.env.NODE_ENV === 'development' ? error.message : undefined\n        },\n        { status: 503 }\n      );\n    }\n    \n    if (error.code === 'P2021') {\n      return NextResponse.json(\n        { \n          error: \"Database tables not found. Please run database migrations.\",\n          details: process.env.NODE_ENV === 'development' ? error.message : undefined\n        },\n        { status: 503 }\n      );\n    }\n    \n    return NextResponse.json(\n      { \n        error: \"Something went wrong\",\n        details: process.env.NODE_ENV === 'development' ? error.message : undefined\n      },\n      { status: 500 }\n    );\n  } finally {\n    // Disconnect Prisma to avoid connection pool issues\n    await prisma.$disconnect().catch(() => {});\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI;QAEhD,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,kLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAkC,GAC3C;gBAAE,QAAQ;YAAI;QAElB;QAEA,kCAAkC;QAClC,IAAI;YACF,MAAM,kKAAM,CAAC,QAAQ;QACvB,EAAE,OAAO,SAAc;YACrB,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,OAAO,kLAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,uCAAyC,QAAQ,OAAO,GAAG;YACtE,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,+BAA+B;QAC/B,IAAI;QACJ,IAAI;YACF,eAAe,MAAM,kKAAM,CAAC,IAAI,CAAC,UAAU,CAAC;gBAC1C,OAAO;oBAAE;gBAAM;YACjB;QACF,EAAE,OAAO,aAAkB;YACzB,QAAQ,KAAK,CAAC,uBAAuB;YAErC,gCAAgC;YAChC,IAAI,YAAY,IAAI,KAAK,SAAS;gBAChC,OAAO,kLAAY,CAAC,IAAI,CACtB;oBACE,OAAO;oBACP,SAAS,uCAAyC,8BAA8B;gBAClF,GACA;oBAAE,QAAQ;gBAAI;YAElB;YAEA,IAAI,YAAY,IAAI,KAAK,SAAS;gBAChC,OAAO,kLAAY,CAAC,IAAI,CACtB;oBACE,OAAO;oBACP,SAAS,uCAAyC,gCAAgC;gBACpF,GACA;oBAAE,QAAQ;gBAAI;YAElB;YAEA,MAAM;QACR;QAEA,IAAI,cAAc;YAChB,OAAO,kLAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAsB,GAC/B;gBAAE,QAAQ;YAAI;QAElB;QAEA,gBAAgB;QAChB,MAAM,iBAAiB,MAAM,gLAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,cAAc;QACd,MAAM,OAAO,MAAM,kKAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACpC,MAAM;gBACJ;gBACA,MAAM,QAAQ;gBACd,cAAc;YAChB;QACF;QAEA,OAAO,kLAAY,CAAC,IAAI,CACtB;YACE,MAAM;gBACJ,IAAI,KAAK,EAAE;gBACX,OAAO,KAAK,KAAK;gBACjB,MAAM,KAAK,IAAI;YACjB;QACF,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,uBAAuB;QAErC,uBAAuB;QACvB,IAAI,MAAM,IAAI,KAAK,SAAS;YAC1B,OAAO,kLAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,uCAAyC,MAAM,OAAO,GAAG;YACpE,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,IAAI,MAAM,IAAI,KAAK,SAAS;YAC1B,OAAO,kLAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,uCAAyC,MAAM,OAAO,GAAG;YACpE,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,OAAO,kLAAY,CAAC,IAAI,CACtB;YACE,OAAO;YACP,SAAS,uCAAyC,MAAM,OAAO,GAAG;QACpE,GACA;YAAE,QAAQ;QAAI;IAElB,SAAU;QACR,oDAAoD;QACpD,MAAM,kKAAM,CAAC,WAAW,GAAG,KAAK,CAAC,KAAO;IAC1C;AACF"}}]
}